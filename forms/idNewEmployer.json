{
    "className": "org.joget.apps.form.model.Form",
    "elements": [{
        "className": "org.joget.apps.form.model.Section",
        "elements": [{
            "className": "org.joget.apps.form.model.Column",
            "elements": [
                {
                    "className": "org.joget.apps.form.lib.TextField",
                    "properties": {
                        "id": "id",
                        "label": "id",
                        "maxlength": "",
                        "placeholder": "",
                        "readonly": "",
                        "readonlyLabel": "",
                        "size": "",
                        "storeNumeric": "",
                        "style": "",
                        "validator": {
                            "className": "",
                            "properties": {}
                        },
                        "value": "",
                        "workflowVariable": ""
                    }
                },
                {
                    "className": "org.joget.apps.form.lib.TextField",
                    "properties": {
                        "id": "username",
                        "label": "user name",
                        "maxlength": "",
                        "placeholder": "",
                        "readonly": "",
                        "readonlyLabel": "",
                        "size": "",
                        "storeNumeric": "",
                        "style": "",
                        "validator": {
                            "className": "",
                            "properties": {}
                        },
                        "value": "",
                        "workflowVariable": ""
                    }
                },
                {
                    "className": "org.joget.apps.form.lib.PasswordField",
                    "properties": {
                        "id": "password",
                        "label": "password",
                        "maxlength": "",
                        "readonly": "",
                        "readonlyLabel": "",
                        "size": "",
                        "validator": {
                            "className": "",
                            "properties": {}
                        },
                        "value": ""
                    }
                },
                {
                    "className": "org.joget.apps.form.lib.TextField",
                    "properties": {
                        "id": "firstName",
                        "label": "firstName",
                        "maxlength": "",
                        "placeholder": "",
                        "readonly": "",
                        "readonlyLabel": "",
                        "size": "",
                        "storeNumeric": "",
                        "style": "",
                        "validator": {
                            "className": "",
                            "properties": {}
                        },
                        "value": "",
                        "workflowVariable": ""
                    }
                },
                {
                    "className": "org.joget.apps.form.lib.TextField",
                    "properties": {
                        "id": "lastName",
                        "label": "lastName",
                        "maxlength": "",
                        "placeholder": "",
                        "readonly": "",
                        "readonlyLabel": "",
                        "size": "",
                        "storeNumeric": "",
                        "style": "",
                        "validator": {
                            "className": "",
                            "properties": {}
                        },
                        "value": "",
                        "workflowVariable": ""
                    }
                },
                {
                    "className": "org.joget.apps.form.lib.TextField",
                    "properties": {
                        "id": "email",
                        "label": "email",
                        "maxlength": "",
                        "placeholder": "",
                        "readonly": "",
                        "readonlyLabel": "",
                        "size": "",
                        "storeNumeric": "",
                        "style": "",
                        "validator": {
                            "className": "",
                            "properties": {}
                        },
                        "value": "",
                        "workflowVariable": ""
                    }
                },
                {
                    "className": "org.joget.apps.form.lib.TextField",
                    "properties": {
                        "id": "active",
                        "label": "active",
                        "maxlength": "",
                        "placeholder": "",
                        "readonly": "",
                        "readonlyLabel": "",
                        "size": "",
                        "storeNumeric": "",
                        "style": "",
                        "validator": {
                            "className": "org.joget.apps.form.lib.DefaultValidator",
                            "properties": {
                                "mandatory": "true",
                                "message": "",
                                "type": "numeric"
                            }
                        },
                        "value": "",
                        "workflowVariable": ""
                    }
                }
            ],
            "properties": {"width": "100%"}
        }],
        "properties": {
            "comment": "",
            "id": "section1",
            "join": "",
            "label": "Nouvelle Employé",
            "loadBinder": {
                "className": "",
                "properties": {}
            },
            "permission": {
                "className": "",
                "properties": {}
            },
            "permissionReadonly": "",
            "readonly": "",
            "readonlyLabel": "",
            "regex": "",
            "reverse": "",
            "storeBinder": {
                "className": "",
                "properties": {}
            },
            "visibilityControl": "",
            "visibilityValue": ""
        }
    }],
    "properties": {
        "description": "",
        "id": "idNewEmployer",
        "loadBinder": {
            "className": "org.joget.apps.form.lib.WorkflowFormBinder",
            "properties": {}
        },
        "name": "ajouter un nouvelle employé",
        "noPermissionMessage": "",
        "permission": {
            "className": "",
            "properties": {}
        },
        "postProcessor": {
            "className": "",
            "properties": {}
        },
        "postProcessorRunOn": "create",
        "storeBinder": {
            "className": "org.joget.apps.form.lib.BeanShellFormBinder",
            "properties": {
                "autoHandleFiles": "",
                "autoHandleWorkflowVariable": "true",
                "cacheInterval": "",
                "script": "import java.sql.Connection;\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\nimport javax.sql.DataSource;\nimport org.joget.apps.app.model.AppDefinition;\nimport org.joget.apps.app.service.AppService;\nimport org.joget.apps.app.service.AppUtil;\nimport org.joget.apps.form.model.Element;\nimport org.joget.apps.form.model.FormData;\nimport org.joget.apps.form.model.FormRow;\nimport org.joget.apps.form.model.FormRowSet;\nimport org.joget.apps.form.model.FormStoreBinder;\nimport org.joget.apps.form.service.FormUtil;\nimport org.joget.plugin.base.PluginManager;\nimport org.joget.commons.util.LogUtil;\n  \npublic FormRowSet storeData(Element element, FormRowSet rows, FormData formData) {\n    //check for empty data\n    if (rows == null || rows.isEmpty()) {\n        return rows;\n    }\n    normalStoring(element, rows, formData);\n  \n    //store only needed field by create new Form Row Set\n    FormRow originalRow = rows.get(0);\n    FormRowSet newRows = new FormRowSet();\n    FormRow newRow = new FormRow();\n  \n    \n    newRow.put(\"username\", originalRow.getProperty(\"username\"));\n    newRow.put(\"password\", originalRow.getProperty(\"password\"));\n    newRow.put(\"firstName\", originalRow.getProperty(\"firstName\"));\n    newRow.put(\"lastName\", originalRow.getProperty(\"lastName\"));\n    newRow.put(\"email\", originalRow.getProperty(\"email\"));\n    newRow.put(\"active\", originalRow.getProperty(\"active\"));\n    newRows.add(newRow);\n  \n    //String id = \"#currentUser.username#\"; \n    String id =\"aziz\";\n  \n    //store\n    //storeToOtherFormDataTable(element, newRows, formData, id);\n    storeUsingJDBC(element, newRows, formData, id);\n  \n    return rows;\n}\n  \n\n  \n//this function will store rows data to external source using JDBC\npublic void storeUsingJDBC(Element element, FormRowSet rows, FormData formData, String id) {\n    Connection con = null;\n    try {\n                String insertQuery = \"INSERT INTO dir_user (id, username, firstName, lastName, password, email) values (?, ?, ?, ?, 'md5(password)', ?)\";\n                PreparedStatement istmt = con.prepareStatement(insertQuery);\n                istmt.setString(1, id);\n                istmt.setString(2, row.getProperty(\"username\"));\n                istmt.setString(3, row.getProperty(\"firstName\"));\n                istmt.setString(4, row.getProperty(\"lastName\"));\n                istmt.setString(5, row.getProperty(\"email\"));\n                istmt.executeUpdate();\n            }\n        }\n    } catch (Exception e) {\n        LogUtil.error(\"Sample app - StoreToMultipleSource form\", e, \"Error storing using jdbc\");\n    } finally {\n        try {\n            if(con != null) {\n                con.close();\n            }\n        } catch (SQLException e) {LogUtil.error(e);}\n    }\n}\n  \n//call storeData method with injected variables\nreturn storeData(element, rows, formData);\n"
            }
        },
        "tableName": "dir_user"
    }
}